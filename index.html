<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>reveal.js</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/night.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement( 'link' );
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>

	<style>
		h2 {
			font-size: 2em;
		}
		h2.contrast {
			color: #111;
		}
		div.photo_credits {
			position: fixed;
			bottom: 0;
			left: 0;
			font-size: 0.4em; !important
		}
		table.roundup {
			font-size: 0.86em;
		}
		.logo {
			margin: 0px;
			border: 0px;
			background: none;
		}
	</style>
</head>
<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h1 style="font-size: 2.12em;">Python Web Frameworks in the Age of Microservices</h1>

				<br>
				<br>

				<ul>
					<li>twitter: <a href="https://twitter.com/MislavCimpersak">@MislavCimpersak</a></li>
					<li>github: <a href="https://github.com/mislavcimpersak">github.com/mislavcimpersak</a></li>
				</ul>

				<aside class="notes" data-markdown>
					- Hello, I'm Mislav.
					- Today I'm going to talk about microservices building blocks within Python ecosystem
					- with a strong emphasis on microservices that heavily use RESTful API as the main mean of communication with other services.
				</aside>
			</section>

			<section data-background-image="media/old_faithful.jpg">
				<h2 class="contrast">Old Faithful</h2>

				<div class="photo_credits">
					Photo by Emily Campbell on Unsplash
				</div>

				<aside class="notes" data-markdown>
					- Lucky for us, Python's ecosystem is rich with numerous wonderful web frameworks, some considered enterprise ready and some a lot more boutique than you might find comfortable.
					- I'll start with two frameworks everybody has heard of:
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/django/django">Django</a></h2>

				<img style="border: 0px; background: none; margin: 15px; padding: 15px;" src="media/django_logo.png" alt="">

				<aside class="notes" data-markdown>
					- The first one is Django.
					- I'm not going to talk a lot about Django since I'm betting that most of you, if not all have worked on a Django based project in their lifetime.
					- It's stable, it's mature, it's got a large and strong community, it's excellent for prototyping your idea real fast,
					- but also proven in the wild to be able to handle even huge deployments.
					- It's the framework you will use for your project when you want to get it running in minumum time.
					- But often, in later phases, your Django monolith is the first thing on the chopping block.
					- Because... it's slow.
					- Framework overhead is just huge.
					- For a microservice you can turn off a lot of things you aren't using, like various middlewares and such, but you'll never get stellar speeds.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/pallets/flask">Flask</a></h2>

				<img style="border: 0px; background: white; margin: 15px; padding: 15px;" src="media/flask_logo.png" alt="">

				<aside class="notes" data-markdown>
					- Flask's development is slow and steady. I guess.
					- Even though the current version is 0.12, most folks consider it stable enough to build their businesses on it.
					- Today really wide spread. Big companies like Twillio and Pinterest are using it for parts of their infrastructure.
					- If we could call Django "batteries included" framework, we could call Flask "some batteries included" framework.
					- But guess what? Even though it's faster than Django, it's still not the fastest thing in the world.
				</aside>
			</section>

			<section data-background-image="media/road_less_traveled.jpg">
				<h2 class="contrast">Road Less Traveled</h2>

				<div class="photo_credits">
					Photo by Gabriel Garcia Marengo on Unsplash
				</div>

				<aside class="notes" data-markdown>
					- That brings us to the other frameworks.
					- Frameworks that are created from the get-go with minimalism in mind.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/bottlepy/bottle">Bottle</a></h2>

				<img style="border: 0px; background: white; margin: 15px; padding: 15px;" src="media/bottle_logo.png" alt="" width="40%">

				<aside class="notes" data-markdown>
					- Bottle is perhaps the most known one of the crowd and the oldest.
					- First release on pypi was in 2009.
					- At first I decided to skip it because, let's face it, it's not really _that_ unknown and because I'm not even sure if the project is even _properly_ alive.
					- last post on development blog is July 2013 (http://blog.bottlepy.org/)
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/bottlepy/bottle">Bottle</a></h2>

				<div style="text-align:center;">
					<img src="media/bottle_versions_01.png" alt="" style="display: inline-block; margin-left: auto; margin-right: auto; height: 530px;">
					<img src="media/bottle_versions_02.png" alt="" style="display: inline-block; margin-left: auto; margin-right: auto; height: 530px;">
				</div>

				<aside class="notes" data-markdown>
					- really, really slow development
					- as we can see from releases
					- Is it considered feature complete?
					- Is that the reason?
					- It has +200 opened issues and 34 opened pull requests on Github, so I'd say no.
					- I'm not calling it dead, but I wouldn't choose it for my app.
					- So let's move on.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/falconry/falcon">Falcon</a></h2>

				<img style="border: 0px; margin: 0px; background: none;" src="media/falcon_logo.svg" alt="">

				<aside class="notes" data-markdown>
					- ...to Falcon.
					- created at Rackspace circa 2013

					- Needed some simple messaging mechanism for some internal tooling.
					- Tried the first prototype in Flask, but because of strict latency requirements Flask didn't make the cut.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/falconry/falcon">Falcon</a></h2>

				<ul>
					<li style="margin-bottom: 20px;"><i>bare-metal Python web API framework for building high-performance microservices, app backends, and higher-level frameworks</i></li>
					<li style="margin-bottom: 20px;" class="fragment">py2.6 / py3.6 / pypy2 / pypy3</li>
					<li class="fragment">Rackspace, OpenStack, Opera Software, Linkedin, Wargaming</li>
				</ul>

				<aside class="notes" data-markdown>
					- Falcon's elevator pitch is:
					- It's a relatively thin layer on top of WSGI, so there's not a lot between you and your web server.
					- Useful for, as I said, microservices, proxies, application backend, and stuff like that, with emphasis on low latency, high scale uses.
					- The core idea around Falcon is to remove the bottleneck in the framework.
					- Everything outside of that is up to you.

					- Also perfect as a complementary framework.
					- If you have a hot endpoint in your Django monolith, why not take that endpoint out to a special microservice and write it in Falcon.

					- Works on, well everything.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/falconry/falcon">Falcon</a></h2>

				<img style="border: 0px; margin: 0px; background: none;" src="media/falcon_example.png" alt="">

				<aside class="notes" data-markdown>
					- This is how a basic Falcon app looks like.
					- We define resources as plain Python classes which have methods for each http verb we need.
					- If we don't define verb method, we get 405; method not allowed.
					- This resource responds to get/post/etc. requests.
					- Within a verb method you get request and response objects.
					- You get all the information you need from request and pass along the response object.
					- After that is setup, resource needs to be wired up to a route.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/timothycrosley/hug">Hug</a></h2>

				<img style="border: 0px; margin: 15px; background: none;" src="media/hug_logo.png" alt="">

				<aside class="notes" data-markdown>
					- Hug is my favorite, if for nothing else then for the cute mascot.
					- Released mid 2015.
					- Uses Falcon in the background, but makes everything a bit more friendly and automatic.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/timothycrosley/hug">Hug</a></h2>

				<ul>
					<li><em>Hopefully Useful Guide</em></li>
					<li class="fragment">version management</li>
					<li class="fragment">type annotation powered validation</li>
					<li class="fragment">Falcon ‚ù§ Hug</li>
					<li class="fragment">~ docs</li>
				</ul>

				<aside class="notes" data-markdown>
					- This represents the project's goal to help guide developers into creating well written and intuitive APIs.

					- Hug makes it easy to expose multiple versions of your API. You can simply specify which version or range of versions an endpoint supports and then automatically have that enforced and communicated to your API's users.
					- Hug leverages Python 3 type annotations to enable simple per argument validation and transformation. This leads to explicit and easy to follow endpoints.

					- Even though Falcon and Hug are separate projects, there are some tests in Falcon's repo that make sure they don't break Hug.
					- As much is Falcon uopinionated, Hug is.
					- And that's a good thing.
					- To get a service up and running really, really fast, it's perfect.
					- As simple as Flask or Bottle and also in some ways more explicit.
					- And also faster.

					- Unfortunately, the docs are a mixed bag.
					- They cover Hug specific problems, but since Hug is built upon Falcon you often end up going to Falcon's docs.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/timothycrosley/hug">Hug</a></h2>

				<img style="border: 0px; margin: 0px; background: none; height: 580px;" src="media/hug_example.png" alt="">

				<aside class="notes" data-markdown>
					- The code is pretty self explanatory here.
					- Hug uses the concept of directives through which you can choose how to expose your API points.
					- Here it's the usual GET, but it can also be only through CLI or internal through Python.
					- We see here before mentioned versions
					- and an example of how to use the endpoint.
					- For completeness, I've also included here an async example.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/timothycrosley/hug">Hug</a></h2>

				<img style="border: 0px; margin: 0px; background: none; height: 580px;" src="media/hug_autodocs.png" alt="">

				<aside class="notes" data-markdown>
					- Hug uses docstring, type anotations and all that extra information you entered before to automatically generate documentation for users of your API so you don't have to.
					- Docs are available in your root.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/channelcat/sanic">Sanic</a></h2>

				<img style="border: 0px; margin: 0px; background: none;" src="media/sanic_logo.png" alt="" width="60%">

				<aside class="notes" data-markdown>
					- End of 2016.
					- And as the mascot says: It's gotta go fast.
					- It's obviously named after Sonic The Hedgehog, more specifically a popular Internet meme of a poorly drawn version of Sonic.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/channelcat/sanic">Sanic</a></h2>

				<ul>
					<li><em>Flask-like Python 3.5+ web server that's written to go fast</em></li>
					<li class="fragment">async - <a href="https://github.com/MagicStack/uvloop">uvloop</a></li>
					<li class="fragment">blueprints</li>
					<li class="fragment">class-based views</li>
					<li class="fragment">...</li>
				</ul>

				<aside class="notes" data-markdown>
					- We'll observe it here as a framework of sorts.
					- Built specifically to take advantage of async/await in Python 3.5.
					- Built upon uvloop, an ultra fast asyncio event loop.
						- According to their benchmarks, uvloop makes asyncio run faster 2-4x faster.
						- And also close to the performance of Go programs.
						- Magic!
					- Since it's inspired by Flask it's got many niffty things like blueprints, class-based views and many many other stuff.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/channelcat/sanic">Sanic</a></h2>

				<img style="border: 0px; margin: 0px; background: none; height: 580px;" src="media/sanic_example.png" alt="">

				<aside class="notes" data-markdown>
					- And well...
					- Here we can also see the obvious Flask inspiration.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/encode/apistar">API Star</a></h2>

				<h2>üåü</h2>

				<aside class="notes" data-markdown>
					- The newest player in town is API Star created by Tom Christie of Django Rest Framework fame.
					- It's standalone framework but that can use Django's ORM or SQLAlchemy.
					- I had the good fortune of being on the last DjangoCon when Tom Christie announced API Star.
					- There were a lot of mixed feelings there.
						- From people saying: "This is the best thing since sliced bread" to "Is _Rest Framework_ now dead?"
						- Well, both were wrong.
						- Christie is working on both and that is a good thing and a bad thing.
						- It's good that he's still working on _Rest Framework_ since it's such an integral part of Django today.
						- But it's a bad thing that he's still working on _Rest Framework_ since API Star is sometimes neglected.

					- I tried doing something with back in spring and than later it in the summer, and it was _kind of_ broken.
					- Things worked, but I've scratched the surface just a bit and tried to do something just a bit above tutorial and I get errors from the package itself.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/encode/apistar">API Star</a></h2>

				<ul>
					<li>wsgi or async</li>
					<li class="fragment">json schema generation</li>
					<li class="fragment">typesystem for validation</li>
					<li class="fragment">~ templating</li>
					<li class="fragment">~ authentication</li>
					<li class="fragment">testing using py.test</li>
				</ul>

				<aside class="notes" data-markdown>
						- So, what does it offer?
						- wsgi or async straight out of the box
							- no fumbling around with 3rd party packages and such
							- async using `uvicorn`
						- Generating json schema for Swagger, RAML or CoreJSON.
						- Leveraging typesystem for validation
						- Out-of-the-box templating using Jinja2, but bear in mind that _text/JSON_ content type is the default one
						- Authentication builtin, but you have to provide against what you're actually authenticating
						- Testing using py.test.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/encode/apistar">API Star</a></h2>

				<img style="border: 0px; margin: 0px; background: none;" src="media/apistar_autodocs.gif" alt="">

				<aside class="notes" data-markdown>
					- And since this is Tom Christie, we have beautiful web browsable auto docs.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/encode/apistar">API Star</a></h2>

				<img style="border: 0px; margin: 0px; background: none; height: 580px;" src="media/apistar_example.png" alt="">

				<aside class="notes" data-markdown>
					- Both Django's and Flask's influences are obvious here.
					- All in all, it's quite simple to get a simple point up and running in no time.
				</aside>
			</section>

			<section>
				<h2><a href="https://github.com/encode/apistar">API Star</a></h2>

				<img style="border: 0px; margin: 0px; background: none;" src="media/apistar_benchmarks_techempower_com.png" alt="">

				<div style="font-size: 0.5em;" data-markdown>`{"message":"Hello, World!"}`</div>

				<div class="photo_credits">
					<a href="https://www.techempower.com/benchmarks/#section=data-r14&hw=ph&test=json">* techempower.com benchmark</a>
				</div>

				<aside class="notes" data-markdown>
					- Speed, and lots of it.
					- Testing how many requests can we get from a certain framework.
					- True, not the best benchmark, definitely far from real-world application.
					- But shows just how little frameworks like API Star and Falcon get in the way, how little overhead they add.

					- Two-three months ago, for me it was a definite _no_ to use Apistar in production.
					- Today it's a soft _maybe_.
					- Hopefuly in another three months it will be a hard _yes_, because it really is a good project.
				</aside>
			</section>

			<section data-background-image="media/roundup.jpg">
				<h2 class="contrast">Roundup</h2>

				<div class="photo_credits">
					Photo by Erlend Ekseth on Unsplash
				</div>

				<aside class="notes" data-markdown>
					- For my final slide I decided to do a round up of sorts.
					- Bear in mind that the my findings are a bit subjective but hopefuly useful.
				</aside>
			</section>

			<section>
				<table class="roundup">
					<tr>
						<th></th>
						<th>stable</th>
						<th>docs</th>
						<th>speed</th>
						<th>async*</th>
						<th>py2</th>
						<th>mascot</th>
					</tr>
					<tr>
						<th class="fragment fade-in" data-fragment-index="20">Django</th>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="20">üëå</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="20">üëå</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="20">üëé</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="20">üëé</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="20">‚õî <span style="font-size: 0.6em">**</span></td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="25">üòä</td>
					</tr>
					<tr>
						<th class="fragment fade-in" data-fragment-index="30">Flask</th>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="30">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="30">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="30">ü§û</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="30">üëé</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="30">‚úÖ</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="35">üòë</td>
					</tr>
					<tr>
						<th class="fragment fade-in" data-fragment-index="40">Bottle</th>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="40">ü§û</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="40">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="40">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="40">üëé</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="40">‚úÖ</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="45">üòë</td>
					</tr>
					<tr>
						<th class="fragment fade-in" data-fragment-index="50">Falcon</th>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="50">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="50">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="50">üëå</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="50">üëé</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="50">‚úÖ</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="55">üò≤</td>
					</tr>
					<tr>
						<th class="fragment fade-in" data-fragment-index="60">Hug</th>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="60">ü§û</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="60">üëé</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="60">üëå</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="60">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="60">‚õî</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="65">üòç</td>
					</tr>
					<tr>
						<th class="fragment fade-in" data-fragment-index="70">Sanic</th>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="70">ü§û</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="70">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="70">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="70">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="70">‚õî</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="75">derp</td>
					</tr>
					<tr>
						<th class="fragment fade-in" data-fragment-index="80">API Star</th>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="80">üñï</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="80">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="80">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="80">üëç</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="80">‚õî</td>
						<td style="text-align: center" class="fragment fade-in" data-fragment-index="85">ü§î</td>
					</tr>
				</table>

				<div class="photo_credits">
					<span>* out of the box</span>
					<br>
					<span class="fragment fade-in" data-fragment-index="20">** not since 2.0 üëè</span>
				</div>


				<aside class="notes" data-markdown>
					- django mascot: cute
					- flask/bottle mascot: unexciting
					- falcon mascot: powerful!
					- hug mascot: heart melting
					- sanic: derp
					- apistar: a star?
				</aside>
			</section>

			<section>
				<h2>Q & A</h2>
				<a href="https://mislavcimpersak.github.io/python-microservices-frameworks-talk/">mislavcimpersak.github.io/python-microservices-frameworks-talk</a>

				<aside class="notes" data-markdown>
					- That's it from me.
					- My talk is available online
					- And I'll be also sharing the url on meetup.com
					- I hope that I've introduced you to at least one new framework and set you on a course to go beyond the usual crowd.

					------------

					- Before we all go to Kolding for some beer, I would just like to give two public service announcements.
				</aside>
			</section>

			<section data-background-image="media/styria_hiring.png">

			</section>

			<section>
				<h2><a href="http://pythonbalkan.com/">PythonBalkan.com</a></h2>

				<img style="border: 0px; margin: 0px; background: none; height: 400px;" src="media/python_balkan_logo.png" alt="">

				<h4>Join @ Discord: Python Balkan</h4>
			</section>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			history: true,
			transition: 'fade',

			dependencies: [
			{ src: 'plugin/markdown/marked.js' },
			{ src: 'plugin/markdown/markdown.js' },
			{ src: 'plugin/notes/notes.js', async: true },
			{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
			]
		});
	</script>
</body>
</html>
